import{c as X,e as P,a as f,h as m,b as Fe,g as he,i as le,l as Ae,f as Oe,G as Re,H as $e,I as E,s as _,J as x,K as q,L as Y,M as Te,P as He,N as Be,O as M,A as Ee,Q as De,R as $,S as D,T as re,U as k,V as Q,W as V,X as ke,Y as Ve,r as y,Z as Ne,$ as je,w as Le,a0 as Qe,a1 as Ie,o as Ue,q as Xe,a2 as oe,a3 as ne,a4 as N,t as H,u as z,x as S,a5 as B,a6 as I,a7 as U,a8 as Ye,a9 as be,aa as Ke,ab as pe,ac as ie}from"./index.a7c1ee44.js";import{Q as se,a as We}from"./QScrollObserver.a707132f.js";var Ge=X({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:o}}=he(),s=le(Ae,P);if(s===P)return console.error("QPage needs to be a deep child of QLayout"),P;if(le(Oe,P)===P)return console.error("QPage needs to be child of QPageContainer"),P;const r=f(()=>{const l=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const u=s.isContainer.value===!0?s.containerHeight.value:o.screen.height;return e.styleFn(l,u)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-l+"px":o.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":o.screen.height-l+"px"}}),n=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>m("main",{class:n.value,style:r.value},Fe(t.default))}});const K=Re("webRTC",{state:()=>({localVideoRef:null,remoteVideoRef:null,localStream:null,remoteStream:null,localPeer:null,remotePeer:null,dataChannel:null,localMessages:[],remoteMessages:[],cameraOpen:!1}),actions:{async getUserMediaStream(){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});this.localVideoRef.srcObject=e,this.localStream=e,this.cameraOpen=!0}catch(e){$e.create({title:"\u63D0\u793A",message:"\u627E\u4E0D\u5230\u76F8\u95DC\u88DD\u7F6E\u6216\u672A\u5141\u8A31\u76F8\u95DC\u6B0A\u9650"}),console.log("\u{1F680} ~ file: web-rtc.ts:30 ~ start ~ e",e)}},switchCamera(){var e;this.cameraOpen=!this.cameraOpen,this.localVideoRef.srcObject=this.cameraOpen?this.localStream:null,(e=this.localStream)==null||e.getTracks().forEach(t=>{t.enabled=this.cameraOpen})},async onIceCandidate(e,t){try{await e.addIceCandidate(t.candidate)}catch(o){console.log("\u{1F680} ~ file: web-rtc.ts:33 ~ onIceCandidate ~ e",o)}},buildPeerConnection(e,t={}){const o=new RTCPeerConnection(t);return o.onicecandidate=s=>this.onIceCandidate(this[e],s),o},async onLocalPeerCreateOfferSuccess(e){try{await this.localPeer.setLocalDescription(e)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:57 ~ onLocalPeerCreateOfferSuccess ~ e",t)}try{await this.remotePeer.setRemoteDescription(e)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:62 ~ onLocalPeerCreateOfferSuccess ~ e",t)}try{const t=await this.remotePeer.createAnswer();await this.onRemotePeerCreateAnswerSuccess(t)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:73 ~ onLocalPeerCreateOfferSuccess ~ e",t)}},async onRemotePeerCreateAnswerSuccess(e){var t,o;try{await((t=this.remotePeer)==null?void 0:t.setLocalDescription(e))}catch(s){console.log("\u{1F680} ~ file: web-rtc.ts:57 ~ onRemotePeerCreateAnswerSuccess ~ e",s)}try{await((o=this.localPeer)==null?void 0:o.setRemoteDescription(e))}catch(s){console.log("\u{1F680} ~ file: web-rtc.ts:64 ~ onRemotePeerCreateAnswerSuccess ~ e",s)}},gotRemoteStream(e){this.remoteStream!==e.streams[0]&&(this.remoteStream=e.streams[0],this.remoteVideoRef.srcObject=e.streams[0])},async connect(){var t;const e={};this.localPeer=this.buildPeerConnection("remotePeer",e),(t=this.localStream)==null||t.getTracks().forEach(o=>{var s;return(s=this.localPeer)==null?void 0:s.addTrack(o,this.localStream)}),this.dataChannel=this.localPeer.createDataChannel("my local channel",{negotiated:!1}),this.remotePeer=this.buildPeerConnection("localPeer",e),this.remotePeer.ontrack=this.gotRemoteStream,this.remotePeer.ondatachannel=this.receiveChannelCallback;try{const o=await this.localPeer.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});await this.onLocalPeerCreateOfferSuccess(o)}catch(o){console.log("\u{1F680} ~ file: web-rtc.ts:67 ~ call ~ e",o)}},receiveChannelCallback(e){const t=e.channel;t.onmessage=o=>{this.remoteMessages.push(o.data)}},send(e){this.localMessages.push(e),this.dataChannel.send(e)},hangUp(){var e,t;(e=this.localPeer)==null||e.close(),(t=this.remotePeer)==null||t.close(),this.localPeer=null,this.remotePeer=null}}});const Je={class:"row justify-center"},Ze=E({__name:"Video",props:{refName:null},setup(e){const t=K();return(o,s)=>(_(),x("div",Je,[q("video",{ref:a=>Y(t)[e.refName]=a,autoplay:""},null,512)]))}});var et=X({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const o=f(()=>e.sent===!0?"sent":"received"),s=f(()=>`q-message-text-content q-message-text-content--${o.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),a=f(()=>`q-message-text q-message-text--${o.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),r=f(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),n=f(()=>e.size!==void 0?`col-${e.size}`:""),l=f(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function u(h){return t.stamp!==void 0?[h,m("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[h,m("div",{class:"q-message-stamp",[l.value.stamp]:e.stamp})]:[h]}function d(h,g){const b=g===!0?h.length>1?p=>p:p=>m("div",[p]):p=>m("div",{[l.value.msg]:p});return h.map((p,C)=>m("div",{key:C,class:a.value},[m("div",{class:s.value},u(b(p)))]))}return()=>{const h=[];t.avatar!==void 0?h.push(t.avatar()):e.avatar!==void 0&&h.push(m("img",{class:`q-message-avatar q-message-avatar--${o.value}`,src:e.avatar,"aria-hidden":"true"}));const g=[];t.name!==void 0?g.push(m("div",{class:`q-message-name q-message-name--${o.value}`},t.name())):e.name!==void 0&&g.push(m("div",{class:`q-message-name q-message-name--${o.value}`,[l.value.name]:e.name})),t.default!==void 0?g.push(d(Te(t.default()),!0)):e.text!==void 0&&g.push(d(e.text)),h.push(m("div",{class:n.value},g));const b=[];return t.label!==void 0?b.push(m("div",{class:"q-message-label"},t.label())):e.label!==void 0&&b.push(m("div",{class:"q-message-label",[l.value.label]:e.label})),b.push(m("div",{class:r.value},h)),m("div",{class:`q-message q-message-${o.value}`},b)}}});const W={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},tt=Object.keys(W);W.all=!0;function ue(e){const t={};for(const o of tt)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?W:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function ce(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function at(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),He.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function j(e,t,o){const s=Q(e);let a,r=s.left-t.event.x,n=s.top-t.event.y,l=Math.abs(r),u=Math.abs(n);const d=t.direction;d.horizontal===!0&&d.vertical!==!0?a=r<0?"left":"right":d.horizontal!==!0&&d.vertical===!0?a=n<0?"up":"down":d.up===!0&&n<0?(a="up",l>u&&(d.left===!0&&r<0?a="left":d.right===!0&&r>0&&(a="right"))):d.down===!0&&n>0?(a="down",l>u&&(d.left===!0&&r<0?a="left":d.right===!0&&r>0&&(a="right"))):d.left===!0&&r<0?(a="left",l<u&&(d.up===!0&&n<0?a="up":d.down===!0&&n>0&&(a="down"))):d.right===!0&&r>0&&(a="right",l<u&&(d.up===!0&&n<0?a="up":d.down===!0&&n>0&&(a="down")));let h=!1;if(a===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};a=t.event.lastDir,h=!0,a==="left"||a==="right"?(s.left-=r,l=0,r=0):(s.top-=n,u=0,n=0)}return{synthetic:h,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:s,direction:a,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:l,y:u},offset:{x:r,y:n},delta:{x:s.left-t.event.lastX,y:s.top-t.event.lastY}}}}let lt=0;var de=Be({name:"touch-pan",beforeMount(e,{value:t,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function s(r,n){o.mouse===!0&&n===!0?ke(r):(o.stop===!0&&k(r),o.prevent===!0&&re(r))}const a={uid:"qvtp_"+lt++,handler:t,modifiers:o,direction:ue(o),noop:Ee,mouseStart(r){ce(r,a)&&De(r)&&($(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(r,!0))},touchStart(r){if(ce(r,a)){const n=r.target;$(a,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","passiveCapture"],[n,"touchend","end","passiveCapture"]]),a.start(r)}},start(r,n){if(M.is.firefox===!0&&D(e,!0),a.lastEvt=r,n===!0||o.stop===!0){if(a.direction.all!==!0&&(n!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const d=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&re(d),r.cancelBubble===!0&&k(d),Object.assign(d,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[a.uid]:r.qClonedBy.concat(a.uid)}),a.initialEvent={target:r.target,event:d}}k(r)}const{left:l,top:u}=Q(r);a.event={x:l,y:u,time:Date.now(),mouse:n===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:u}},move(r){if(a.event===void 0)return;const n=Q(r),l=n.left-a.event.x,u=n.top-a.event.y;if(l===0&&u===0)return;a.lastEvt=r;const d=a.event.mouse===!0,h=()=>{s(r,d);let p;o.preserveCursor!==!0&&o.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),d===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),at(),a.styleCleanup=C=>{if(a.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),d===!0){const F=()=>{document.body.classList.remove("no-pointer-events--children")};C!==void 0?setTimeout(()=>{F(),C()},50):F()}else C!==void 0&&C()}};if(a.event.detected===!0){a.event.isFirst!==!0&&s(r,a.event.mouse);const{payload:p,synthetic:C}=j(r,a,!1);p!==void 0&&(a.handler(p)===!1?a.end(r):(a.styleCleanup===void 0&&a.event.isFirst===!0&&h(),a.event.lastX=p.position.left,a.event.lastY=p.position.top,a.event.lastDir=C===!0?void 0:p.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||d===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){h(),a.event.detected=!0,a.move(r);return}const g=Math.abs(l),b=Math.abs(u);g!==b&&(a.direction.horizontal===!0&&g>b||a.direction.vertical===!0&&g<b||a.direction.up===!0&&g<b&&u<0||a.direction.down===!0&&g<b&&u>0||a.direction.left===!0&&g>b&&l<0||a.direction.right===!0&&g>b&&l>0?(a.event.detected=!0,a.move(r)):a.end(r,!0))},end(r,n){if(a.event!==void 0){if(V(a,"temp"),M.is.firefox===!0&&D(e,!1),n===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(j(r===void 0?a.lastEvt:r,a).payload);const{payload:l}=j(r===void 0?a.lastEvt:r,a,!0),u=()=>{a.handler(l)};a.styleCleanup!==void 0?a.styleCleanup(u):u()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(e.__qtouchpan=a,o.mouse===!0){const r=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";$(a,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}M.has.touch===!0&&$(a,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=ue(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),V(t,"main"),V(t,"temp"),M.is.firefox===!0&&D(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});function T(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}const ve=["vertical","horizontal"],L={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},fe={prevent:!0,mouse:!0,mouseAllDir:!0},me=e=>e>=250?50:Math.ceil(e/5);var rt=X({name:"QScrollArea",props:{...Ve,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:o}){const s=y(!1),a=y(!1),r=y(!1),n={vertical:y(0),horizontal:y(0)},l={vertical:{ref:y(null),position:y(0),size:y(0)},horizontal:{ref:y(null),position:y(0),size:y(0)}},{proxy:u}=he(),d=Ne(e,u.$q);let h,g;const b=y(null),p=f(()=>"q-scrollarea"+(d.value===!0?" q-scrollarea--dark":""));l.vertical.percentage=f(()=>{const i=l.vertical.size.value-n.vertical.value;if(i<=0)return 0;const c=T(l.vertical.position.value/i,0,1);return Math.round(c*1e4)/1e4}),l.vertical.thumbHidden=f(()=>(e.visible===null?r.value:e.visible)!==!0&&s.value===!1&&a.value===!1||l.vertical.size.value<=n.vertical.value+1),l.vertical.thumbStart=f(()=>l.vertical.percentage.value*(n.vertical.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=f(()=>Math.round(T(n.vertical.value*n.vertical.value/l.vertical.size.value,me(n.vertical.value),n.vertical.value))),l.vertical.style=f(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`})),l.vertical.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=f(()=>{const i=l.horizontal.size.value-n.horizontal.value;if(i<=0)return 0;const c=T(Math.abs(l.horizontal.position.value)/i,0,1);return Math.round(c*1e4)/1e4}),l.horizontal.thumbHidden=f(()=>(e.visible===null?r.value:e.visible)!==!0&&s.value===!1&&a.value===!1||l.horizontal.size.value<=n.horizontal.value+1),l.horizontal.thumbStart=f(()=>l.horizontal.percentage.value*(n.horizontal.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=f(()=>Math.round(T(n.horizontal.value*n.horizontal.value/l.horizontal.size.value,me(n.horizontal.value),n.horizontal.value))),l.horizontal.style=f(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`})),l.horizontal.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const C=f(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),F=[[de,i=>{ee(i,"vertical")},void 0,{vertical:!0,...fe}]],ge=[[de,i=>{ee(i,"horizontal")},void 0,{horizontal:!0,...fe}]];function G(){const i={};return ve.forEach(c=>{const v=l[c];i[c+"Position"]=v.position.value,i[c+"Percentage"]=v.percentage.value,i[c+"Size"]=v.size.value,i[c+"ContainerSize"]=n[c].value}),i}const J=je(()=>{const i=G();i.ref=u,o("scroll",i)},0);function Z(i,c,v){if(ve.includes(i)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(i==="vertical"?ne:N)(b.value,c,v)}function ye({height:i,width:c}){let v=!1;n.vertical.value!==i&&(n.vertical.value=i,v=!0),n.horizontal.value!==c&&(n.horizontal.value=c,v=!0),v===!0&&A()}function Se({position:i}){let c=!1;l.vertical.position.value!==i.top&&(l.vertical.position.value=i.top,c=!0),l.horizontal.position.value!==i.left&&(l.horizontal.position.value=i.left,c=!0),c===!0&&A()}function Ce({height:i,width:c}){l.horizontal.size.value!==c&&(l.horizontal.size.value=c,A()),l.vertical.size.value!==i&&(l.vertical.size.value=i,A())}function ee(i,c){const v=l[c];if(i.isFirst===!0){if(v.thumbHidden.value===!0)return;g=v.position.value,a.value=!0}else if(a.value!==!0)return;i.isFinal===!0&&(a.value=!1);const w=L[c],R=n[c].value,Pe=(v.size.value-R)/(R-v.thumbSize.value),xe=i.distance[w.dist],Me=g+(i.direction===w.dir?1:-1)*xe*Pe;ae(Me,c)}function te(i,c){const v=l[c];if(v.thumbHidden.value!==!0){const w=i[L[c].offset];if(w<v.thumbStart.value||w>v.thumbStart.value+v.thumbSize.value){const R=w-v.thumbSize.value/2;ae(R/n[c].value*v.size.value,c)}v.ref.value!==null&&v.ref.value.dispatchEvent(new MouseEvent(i.type,i))}}function _e(i){te(i,"vertical")}function ze(i){te(i,"horizontal")}function A(){s.value===!0?clearTimeout(h):s.value=!0,h=setTimeout(()=>{s.value=!1},e.delay),e.onScroll!==void 0&&J()}function ae(i,c){b.value[L[c].scroll]=i}function we(){r.value=!0}function qe(){r.value=!1}let O=null;return Le(()=>u.$q.lang.rtl,i=>{b.value!==null&&N(b.value,Math.abs(l.horizontal.position.value)*(i===!0?-1:1))}),Qe(()=>{O={top:l.vertical.position.value,left:l.horizontal.position.value}}),Ie(()=>{if(O===null)return;const i=b.value;i!==null&&(N(i,O.left),ne(i,O.top))}),Ue(J.cancel),Object.assign(u,{getScrollTarget:()=>b.value,getScroll:G,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:Z,setScrollPercentage(i,c,v){Z(i,c*(l[i].size.value-n[i].value)*(i==="horizontal"&&u.$q.lang.rtl===!0?-1:1),v)}}),()=>m("div",{class:p.value,onMouseenter:we,onMouseleave:qe},[m("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[m("div",{class:"q-scrollarea__content absolute",style:C.value},Xe(t.default,[m(se,{debounce:0,onResize:Ce})])),m(We,{axis:"both",onScroll:Se})]),m(se,{debounce:0,onResize:ye}),m("div",{class:l.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:_e}),m("div",{class:l.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:ze}),oe(m("div",{ref:l.vertical.ref,class:l.vertical.thumbClass.value,style:l.vertical.style.value,"aria-hidden":"true"}),F),oe(m("div",{ref:l.horizontal.ref,class:l.horizontal.thumbClass.value,style:l.horizontal.style.value,"aria-hidden":"true"}),ge)])}});const ot=E({__name:"Chat",props:{pcName:null},setup(e){const t=e,o=y(""),s=K(),a=()=>{s.send(o.value),o.value=""},r={messages:s[`${t.pcName}Messages`],sent:t.pcName==="local"};return(n,l)=>(_(),H(pe,{bordered:"",flat:"",class:"column justify-between q-mt-md chat"},{default:z(()=>[S(B,null,{default:z(()=>[S(rt,{class:"message-area"},{default:z(()=>[(_(!0),x(I,null,U(r.messages,(u,d)=>(_(),H(et,{key:`${e.pcName}${d}`,name:"local",text:[u],sent:r.sent},null,8,["text","sent"]))),128))]),_:1})]),_:1}),S(B,null,{default:z(()=>[e.pcName==="local"?(_(),H(Ye,{key:0,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=u=>o.value=u),outlined:"",dense:""},{after:z(()=>[S(be,{disable:!o.value||!Y(s).remotePeer,icon:"send",round:"",dense:"",flat:"",onClick:a},null,8,["disable"])]),_:1},8,["modelValue"])):Ke("",!0)]),_:1})]),_:1}))}});const nt={class:"full-width q-px-xs-none q-px-md-lg web-rtc"},it={class:"row q-col-gutter-x-md"},st={class:"q-px-md q-px-md-none"},ut={class:"text-subtitle1"},ct={class:"text-caption"},dt={class:"row justify-center q-col-gutter-sm q-mt-sm web-rtc__btn-section"},vt=E({__name:"Index",setup(e){const t=K(),o=[{title:"\u672C\u5730\u96FB\u8166",subtitle:"\u986F\u793A\u672C\u5730\u5F71\u50CF\u3001\u8072\u97F3\u3001\u6587\u5B57",refName:"localVideoRef",pcName:"local"},{title:"\u9060\u7AEF\u96FB\u8166",subtitle:"\u986F\u793A\u672C\u5730\u50B3\u9001\u5230\u8A72\u96FB\u8166\u7684\u5F71\u50CF\u3001\u8072\u97F3\u3001\u6587\u5B57",refName:"remoteVideoRef",pcName:"remote"}],s=f(()=>[{icon:"lock_open",disable:!1,action:t.getUserMediaStream},{icon:t.cameraOpen?"videocam_off":"videocam",disable:!t.localStream,action:t.switchCamera},{icon:"video_call",disable:!t.localStream,action:t.connect},{icon:"call_end",disable:!t.remotePeer,action:t.hangUp}]);return(a,r)=>(_(),x("section",nt,[q("div",it,[(_(),x(I,null,U(o,({title:n,subtitle:l,refName:u,pcName:d},h)=>q("div",{key:`video${h}`,flat:"",bordered:"",class:"col-12 col-md-6"},[q("div",st,[S(pe,{class:"srceen"},{default:z(()=>[S(B,{class:"q-py-sm"},{default:z(()=>[q("div",ut,ie(n),1),q("div",ct,ie(l),1)]),_:2},1024),S(B,{class:"q-pt-sm"},{default:z(()=>[S(Ze,{"ref-name":u},null,8,["ref-name"]),S(ot,{"pc-name":d},null,8,["pc-name"])]),_:2},1024)]),_:2},1024)])])),64))]),q("div",dt,[(_(!0),x(I,null,U(Y(s),({icon:n,disable:l,action:u})=>(_(),x("div",{key:n},[S(be,{icon:n,disable:l,color:"primary","no-caps":"",outline:"",round:"",onClick:u},null,8,["icon","disable","onClick"])]))),128))])]))}}),ht=E({__name:"IndexPage",setup(e){return(t,o)=>(_(),H(Ge,{class:"row justify-center items-center relative-position"},{default:z(()=>[S(vt)]),_:1}))}});export{ht as default};
