import{c as X,e as x,a as m,h as f,b as Fe,g as me,i as ae,l as Ae,f as Oe,G as Re,H as Te,I as D,s as q,J as H,K as S,L as z,M as $e,P as ke,N as Ee,O as M,A as He,Q as Be,R as $,S as V,T as le,U as j,V as U,W as N,X as De,Y as Ve,r as C,Z as je,$ as Ne,w as Le,a0 as Qe,a1 as Ie,o as Ue,q as Xe,a2 as re,a3 as oe,a4 as L,t as E,u as w,x as y,a5 as B,a6 as he,a7 as be,a8 as Ye,a9 as F,aa as Ke,ab as pe,ac as ne}from"./index.39dcaff0.js";import{Q as ie,a as We}from"./QScrollObserver.a9cec411.js";var Ge=X({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:o}}=me(),s=ae(Ae,x);if(s===x)return console.error("QPage needs to be a deep child of QLayout"),x;if(ae(Oe,x)===x)return console.error("QPage needs to be child of QPageContainer"),x;const r=m(()=>{const l=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const d=s.isContainer.value===!0?s.containerHeight.value:o.screen.height;return e.styleFn(l,d)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-l+"px":o.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":o.screen.height-l+"px"}}),i=m(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>f("main",{class:i.value,style:r.value},Fe(t.default))}});const Y=Re("webRTC",{state:()=>({localVideoRef:null,remoteVideoRef:null,localStream:null,remoteStream:null,localPeer:null,remotePeer:null,dataChannel:null,localMessages:[],remoteMessages:[]}),actions:{async getUserMediaStream(){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});this.localVideoRef.srcObject=e,this.localStream=e}catch(e){Te.create({title:"\u63D0\u793A",message:"\u627E\u4E0D\u5230\u76F8\u95DC\u88DD\u7F6E\u6216\u672A\u5141\u8A31\u76F8\u95DC\u6B0A\u9650"}),console.log("\u{1F680} ~ file: web-rtc.ts:30 ~ start ~ e",e)}},turnOnCamera(){var e;this.localVideoRef.srcObject=this.localStream,(e=this.localStream)==null||e.getTracks().forEach(t=>{t.enabled=!0})},turnOffCamera(){var e;this.localVideoRef.srcObject=null,(e=this.localStream)==null||e.getTracks().forEach(t=>{t.enabled=!1})},async onIceCandidate(e,t){try{await e.addIceCandidate(t.candidate)}catch(o){console.log("\u{1F680} ~ file: web-rtc.ts:33 ~ onIceCandidate ~ e",o)}},buildPeerConnection(e,t={}){const o=new RTCPeerConnection(t);return o.onicecandidate=s=>this.onIceCandidate(this[e],s),o},async onLocalPeerCreateOfferSuccess(e){try{await this.localPeer.setLocalDescription(e)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:57 ~ onLocalPeerCreateOfferSuccess ~ e",t)}try{await this.remotePeer.setRemoteDescription(e)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:62 ~ onLocalPeerCreateOfferSuccess ~ e",t)}try{const t=await this.remotePeer.createAnswer();await this.onRemotePeerCreateAnswerSuccess(t)}catch(t){console.log("\u{1F680} ~ file: web-rtc.ts:73 ~ onLocalPeerCreateOfferSuccess ~ e",t)}},async onRemotePeerCreateAnswerSuccess(e){var t,o;try{await((t=this.remotePeer)==null?void 0:t.setLocalDescription(e))}catch(s){console.log("\u{1F680} ~ file: web-rtc.ts:57 ~ onRemotePeerCreateAnswerSuccess ~ e",s)}try{await((o=this.localPeer)==null?void 0:o.setRemoteDescription(e))}catch(s){console.log("\u{1F680} ~ file: web-rtc.ts:64 ~ onRemotePeerCreateAnswerSuccess ~ e",s)}},gotRemoteStream(e){this.remoteStream!==e.streams[0]&&(this.remoteStream=e.streams[0],this.remoteVideoRef.srcObject=e.streams[0])},async connect(){var t;const e={};this.localPeer=this.buildPeerConnection("remotePeer",e),(t=this.localStream)==null||t.getTracks().forEach(o=>{var s;return(s=this.localPeer)==null?void 0:s.addTrack(o,this.localStream)}),this.dataChannel=this.localPeer.createDataChannel("my local channel",{negotiated:!1}),this.remotePeer=this.buildPeerConnection("localPeer",e),this.remotePeer.ontrack=this.gotRemoteStream,this.remotePeer.ondatachannel=this.receiveChannelCallback;try{const o=await this.localPeer.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});await this.onLocalPeerCreateOfferSuccess(o)}catch(o){console.log("\u{1F680} ~ file: web-rtc.ts:67 ~ call ~ e",o)}},receiveChannelCallback(e){const t=e.channel;t.onmessage=o=>{this.remoteMessages.push(o.data)}},send(e){this.localMessages.push(e),this.dataChannel.send(e)},hangUp(){var e,t;(e=this.localPeer)==null||e.close(),(t=this.remotePeer)==null||t.close(),this.localPeer=null,this.remotePeer=null}}});const Je={class:"row justify-center"},Ze=D({__name:"Video",props:{refName:null},setup(e){const t=Y();return(o,s)=>(q(),H("div",Je,[S("video",{ref:a=>z(t)[e.refName]=a,autoplay:""},null,512)]))}});var et=X({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const o=m(()=>e.sent===!0?"sent":"received"),s=m(()=>`q-message-text-content q-message-text-content--${o.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),a=m(()=>`q-message-text q-message-text--${o.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),r=m(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),i=m(()=>e.size!==void 0?`col-${e.size}`:""),l=m(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function d(h){return t.stamp!==void 0?[h,f("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[h,f("div",{class:"q-message-stamp",[l.value.stamp]:e.stamp})]:[h]}function c(h,p){const b=p===!0?h.length>1?g=>g:g=>f("div",[g]):g=>f("div",{[l.value.msg]:g});return h.map((g,_)=>f("div",{key:_,class:a.value},[f("div",{class:s.value},d(b(g)))]))}return()=>{const h=[];t.avatar!==void 0?h.push(t.avatar()):e.avatar!==void 0&&h.push(f("img",{class:`q-message-avatar q-message-avatar--${o.value}`,src:e.avatar,"aria-hidden":"true"}));const p=[];t.name!==void 0?p.push(f("div",{class:`q-message-name q-message-name--${o.value}`},t.name())):e.name!==void 0&&p.push(f("div",{class:`q-message-name q-message-name--${o.value}`,[l.value.name]:e.name})),t.default!==void 0?p.push(c($e(t.default()),!0)):e.text!==void 0&&p.push(c(e.text)),h.push(f("div",{class:i.value},p));const b=[];return t.label!==void 0?b.push(f("div",{class:"q-message-label"},t.label())):e.label!==void 0&&b.push(f("div",{class:"q-message-label",[l.value.label]:e.label})),b.push(f("div",{class:r.value},h)),f("div",{class:`q-message q-message-${o.value}`},b)}}});const K={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},tt=Object.keys(K);K.all=!0;function se(e){const t={};for(const o of tt)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?K:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function ue(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function at(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ke.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function Q(e,t,o){const s=U(e);let a,r=s.left-t.event.x,i=s.top-t.event.y,l=Math.abs(r),d=Math.abs(i);const c=t.direction;c.horizontal===!0&&c.vertical!==!0?a=r<0?"left":"right":c.horizontal!==!0&&c.vertical===!0?a=i<0?"up":"down":c.up===!0&&i<0?(a="up",l>d&&(c.left===!0&&r<0?a="left":c.right===!0&&r>0&&(a="right"))):c.down===!0&&i>0?(a="down",l>d&&(c.left===!0&&r<0?a="left":c.right===!0&&r>0&&(a="right"))):c.left===!0&&r<0?(a="left",l<d&&(c.up===!0&&i<0?a="up":c.down===!0&&i>0&&(a="down"))):c.right===!0&&r>0&&(a="right",l<d&&(c.up===!0&&i<0?a="up":c.down===!0&&i>0&&(a="down")));let h=!1;if(a===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};a=t.event.lastDir,h=!0,a==="left"||a==="right"?(s.left-=r,l=0,r=0):(s.top-=i,d=0,i=0)}return{synthetic:h,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:s,direction:a,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:l,y:d},offset:{x:r,y:i},delta:{x:s.left-t.event.lastX,y:s.top-t.event.lastY}}}}let lt=0;var ce=Ee({name:"touch-pan",beforeMount(e,{value:t,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function s(r,i){o.mouse===!0&&i===!0?De(r):(o.stop===!0&&j(r),o.prevent===!0&&le(r))}const a={uid:"qvtp_"+lt++,handler:t,modifiers:o,direction:se(o),noop:He,mouseStart(r){ue(r,a)&&Be(r)&&($(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(r,!0))},touchStart(r){if(ue(r,a)){const i=r.target;$(a,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),a.start(r)}},start(r,i){if(M.is.firefox===!0&&V(e,!0),a.lastEvt=r,i===!0||o.stop===!0){if(a.direction.all!==!0&&(i!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const c=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&le(c),r.cancelBubble===!0&&j(c),Object.assign(c,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[a.uid]:r.qClonedBy.concat(a.uid)}),a.initialEvent={target:r.target,event:c}}j(r)}const{left:l,top:d}=U(r);a.event={x:l,y:d,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:d}},move(r){if(a.event===void 0)return;const i=U(r),l=i.left-a.event.x,d=i.top-a.event.y;if(l===0&&d===0)return;a.lastEvt=r;const c=a.event.mouse===!0,h=()=>{s(r,c);let g;o.preserveCursor!==!0&&o.preservecursor!==!0&&(g=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),c===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),at(),a.styleCleanup=_=>{if(a.styleCleanup=void 0,g!==void 0&&(document.documentElement.style.cursor=g),document.body.classList.remove("non-selectable"),c===!0){const A=()=>{document.body.classList.remove("no-pointer-events--children")};_!==void 0?setTimeout(()=>{A(),_()},50):A()}else _!==void 0&&_()}};if(a.event.detected===!0){a.event.isFirst!==!0&&s(r,a.event.mouse);const{payload:g,synthetic:_}=Q(r,a,!1);g!==void 0&&(a.handler(g)===!1?a.end(r):(a.styleCleanup===void 0&&a.event.isFirst===!0&&h(),a.event.lastX=g.position.left,a.event.lastY=g.position.top,a.event.lastDir=_===!0?void 0:g.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||c===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){h(),a.event.detected=!0,a.move(r);return}const p=Math.abs(l),b=Math.abs(d);p!==b&&(a.direction.horizontal===!0&&p>b||a.direction.vertical===!0&&p<b||a.direction.up===!0&&p<b&&d<0||a.direction.down===!0&&p<b&&d>0||a.direction.left===!0&&p>b&&l<0||a.direction.right===!0&&p>b&&l>0?(a.event.detected=!0,a.move(r)):a.end(r,!0))},end(r,i){if(a.event!==void 0){if(N(a,"temp"),M.is.firefox===!0&&V(e,!1),i===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(Q(r===void 0?a.lastEvt:r,a).payload);const{payload:l}=Q(r===void 0?a.lastEvt:r,a,!0),d=()=>{a.handler(l)};a.styleCleanup!==void 0?a.styleCleanup(d):d()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(e.__qtouchpan=a,o.mouse===!0){const r=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";$(a,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}M.has.touch===!0&&$(a,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=se(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),N(t,"main"),N(t,"temp"),M.is.firefox===!0&&V(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});function k(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}const de=["vertical","horizontal"],I={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ve={prevent:!0,mouse:!0,mouseAllDir:!0},fe=e=>e>=250?50:Math.ceil(e/5);var rt=X({name:"QScrollArea",props:{...Ve,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:o}){const s=C(!1),a=C(!1),r=C(!1),i={vertical:C(0),horizontal:C(0)},l={vertical:{ref:C(null),position:C(0),size:C(0)},horizontal:{ref:C(null),position:C(0),size:C(0)}},{proxy:d}=me(),c=je(e,d.$q);let h,p;const b=C(null),g=m(()=>"q-scrollarea"+(c.value===!0?" q-scrollarea--dark":""));l.vertical.percentage=m(()=>{const n=l.vertical.size.value-i.vertical.value;if(n<=0)return 0;const u=k(l.vertical.position.value/n,0,1);return Math.round(u*1e4)/1e4}),l.vertical.thumbHidden=m(()=>(e.visible===null?r.value:e.visible)!==!0&&s.value===!1&&a.value===!1||l.vertical.size.value<=i.vertical.value+1),l.vertical.thumbStart=m(()=>l.vertical.percentage.value*(i.vertical.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=m(()=>Math.round(k(i.vertical.value*i.vertical.value/l.vertical.size.value,fe(i.vertical.value),i.vertical.value))),l.vertical.style=m(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`})),l.vertical.thumbClass=m(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=m(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=m(()=>{const n=l.horizontal.size.value-i.horizontal.value;if(n<=0)return 0;const u=k(Math.abs(l.horizontal.position.value)/n,0,1);return Math.round(u*1e4)/1e4}),l.horizontal.thumbHidden=m(()=>(e.visible===null?r.value:e.visible)!==!0&&s.value===!1&&a.value===!1||l.horizontal.size.value<=i.horizontal.value+1),l.horizontal.thumbStart=m(()=>l.horizontal.percentage.value*(i.horizontal.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=m(()=>Math.round(k(i.horizontal.value*i.horizontal.value/l.horizontal.size.value,fe(i.horizontal.value),i.horizontal.value))),l.horizontal.style=m(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[d.$q.lang.rtl===!0?"right":"left"]:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`})),l.horizontal.thumbClass=m(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=m(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const _=m(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),A=[[ce,n=>{Z(n,"vertical")},void 0,{vertical:!0,...ve}]],ge=[[ce,n=>{Z(n,"horizontal")},void 0,{horizontal:!0,...ve}]];function W(){const n={};return de.forEach(u=>{const v=l[u];n[u+"Position"]=v.position.value,n[u+"Percentage"]=v.percentage.value,n[u+"Size"]=v.size.value,n[u+"ContainerSize"]=i[u].value}),n}const G=Ne(()=>{const n=W();n.ref=d,o("scroll",n)},0);function J(n,u,v){if(de.includes(n)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(n==="vertical"?oe:L)(b.value,u,v)}function ye({height:n,width:u}){let v=!1;i.vertical.value!==n&&(i.vertical.value=n,v=!0),i.horizontal.value!==u&&(i.horizontal.value=u,v=!0),v===!0&&O()}function Ce({position:n}){let u=!1;l.vertical.position.value!==n.top&&(l.vertical.position.value=n.top,u=!0),l.horizontal.position.value!==n.left&&(l.horizontal.position.value=n.left,u=!0),u===!0&&O()}function Se({height:n,width:u}){l.horizontal.size.value!==u&&(l.horizontal.size.value=u,O()),l.vertical.size.value!==n&&(l.vertical.size.value=n,O())}function Z(n,u){const v=l[u];if(n.isFirst===!0){if(v.thumbHidden.value===!0)return;p=v.position.value,a.value=!0}else if(a.value!==!0)return;n.isFinal===!0&&(a.value=!1);const P=I[u],T=i[u].value,Pe=(v.size.value-T)/(T-v.thumbSize.value),xe=n.distance[P.dist],Me=p+(n.direction===P.dir?1:-1)*xe*Pe;te(Me,u)}function ee(n,u){const v=l[u];if(v.thumbHidden.value!==!0){const P=n[I[u].offset];if(P<v.thumbStart.value||P>v.thumbStart.value+v.thumbSize.value){const T=P-v.thumbSize.value/2;te(T/i[u].value*v.size.value,u)}v.ref.value!==null&&v.ref.value.dispatchEvent(new MouseEvent(n.type,n))}}function _e(n){ee(n,"vertical")}function ze(n){ee(n,"horizontal")}function O(){s.value===!0?clearTimeout(h):s.value=!0,h=setTimeout(()=>{s.value=!1},e.delay),e.onScroll!==void 0&&G()}function te(n,u){b.value[I[u].scroll]=n}function we(){r.value=!0}function qe(){r.value=!1}let R=null;return Le(()=>d.$q.lang.rtl,n=>{b.value!==null&&L(b.value,Math.abs(l.horizontal.position.value)*(n===!0?-1:1))}),Qe(()=>{R={top:l.vertical.position.value,left:l.horizontal.position.value}}),Ie(()=>{if(R===null)return;const n=b.value;n!==null&&(L(n,R.left),oe(n,R.top))}),Ue(G.cancel),Object.assign(d,{getScrollTarget:()=>b.value,getScroll:W,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:J,setScrollPercentage(n,u,v){J(n,u*(l[n].size.value-i[n].value)*(n==="horizontal"&&d.$q.lang.rtl===!0?-1:1),v)}}),()=>f("div",{class:g.value,onMouseenter:we,onMouseleave:qe},[f("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[f("div",{class:"q-scrollarea__content absolute",style:_.value},Xe(t.default,[f(ie,{debounce:0,onResize:Se})])),f(We,{axis:"both",onScroll:Ce})]),f(ie,{debounce:0,onResize:ye}),f("div",{class:l.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:_e}),f("div",{class:l.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:ze}),re(f("div",{ref:l.vertical.ref,class:l.vertical.thumbClass.value,style:l.vertical.style.value,"aria-hidden":"true"}),A),re(f("div",{ref:l.horizontal.ref,class:l.horizontal.thumbClass.value,style:l.horizontal.style.value,"aria-hidden":"true"}),ge)])}});const ot=D({__name:"Chat",props:{pcName:null},setup(e){const t=e,o=C(""),s=Y(),a=()=>{s.send(o.value),o.value=""},r={messages:s[`${t.pcName}Messages`],sent:t.pcName==="local"};return(i,l)=>(q(),E(pe,{bordered:"",flat:"",class:"column justify-between q-mt-md chat"},{default:w(()=>[y(B,null,{default:w(()=>[y(rt,{class:"message-area"},{default:w(()=>[(q(!0),H(he,null,be(r.messages,(d,c)=>(q(),E(et,{key:`${e.pcName}${c}`,name:"local",text:[d],sent:r.sent},null,8,["text","sent"]))),128))]),_:1})]),_:1}),y(B,null,{default:w(()=>[e.pcName==="local"?(q(),E(Ye,{key:0,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=d=>o.value=d),outlined:"",dense:""},{after:w(()=>[y(F,{disable:!o.value||!z(s).remotePeer,icon:"send",round:"",dense:"",flat:"",onClick:a},null,8,["disable"])]),_:1},8,["modelValue"])):Ke("",!0)]),_:1})]),_:1}))}});const nt={class:"full-width q-px-xs-none q-px-md-lg web-rtc"},it={class:"row q-col-gutter-x-md"},st={class:"q-px-md q-px-md-none"},ut={class:"text-subtitle1"},ct={class:"text-caption"},dt={class:"row justify-center q-col-gutter-sm q-mt-sm web-rtc__btn-section"},vt=D({__name:"Index",setup(e){const t=Y(),o=[{title:"\u672C\u5730\u96FB\u8166",subtitle:"\u986F\u793A\u672C\u5730\u5F71\u50CF\u3001\u8072\u97F3\u3001\u6587\u5B57",refName:"localVideoRef",pcName:"local"},{title:"\u9060\u7AEF\u96FB\u8166",subtitle:"\u986F\u793A\u672C\u5730\u50B3\u9001\u5230\u8A72\u96FB\u8166\u7684\u5F71\u50CF\u3001\u8072\u97F3\u3001\u6587\u5B57",refName:"remoteVideoRef",pcName:"remote"}];let s=!0;const a=()=>{s?t.turnOffCamera():t.turnOnCamera(),s=!s};return(r,i)=>(q(),H("section",nt,[S("div",it,[(q(),H(he,null,be(o,({title:l,subtitle:d,refName:c,pcName:h},p)=>S("div",{key:`video${p}`,flat:"",bordered:"",class:"col-12 col-md-6"},[S("div",st,[y(pe,{class:"srceen"},{default:w(()=>[y(B,{class:"q-py-sm"},{default:w(()=>[S("div",ut,ne(l),1),S("div",ct,ne(d),1)]),_:2},1024),y(B,{class:"q-pt-sm"},{default:w(()=>[y(Ze,{"ref-name":c},null,8,["ref-name"]),y(ot,{"pc-name":h},null,8,["pc-name"])]),_:2},1024)]),_:2},1024)])])),64))]),S("div",dt,[S("div",null,[y(F,{color:"primary",icon:"lock_open","no-caps":"",outline:"",round:"",onClick:z(t).getUserMediaStream},null,8,["onClick"])]),S("div",null,[y(F,{icon:z(s)?"videocam_off":"videocam",disable:!z(t).localStream,color:"primary","no-caps":"",outline:"",round:"",onClick:a},null,8,["icon","disable"])]),S("div",null,[y(F,{disable:!z(t).localStream,color:"primary",icon:"video_call","no-caps":"",outline:"",round:"",onClick:z(t).connect},null,8,["disable","onClick"])]),S("div",null,[y(F,{disable:!z(t).remotePeer,color:"primary",icon:"call_end","no-caps":"",outline:"",round:"",onClick:z(t).hangUp},null,8,["disable","onClick"])])])]))}}),ht=D({__name:"IndexPage",setup(e){return(t,o)=>(q(),E(Ge,{class:"row justify-center items-center relative-position"},{default:w(()=>[y(vt)]),_:1}))}});export{ht as default};
